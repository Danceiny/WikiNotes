<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
<head>
	<title>SACK示例文件</title>
	<meta http-equiv="Content-Type" content="text/html; charset=gb2312" />
	<meta name="author" content="Gregory Wild-Smith" />
	<meta name="copyright" content="Gregory Wild-Smith" />
	<style type="text/css" media="screen">
		@import url( style.css );
	</style>
	<script type="text/javascript" src="tw-sack.js"></script>
<script type="text/javascript">
//创建对象
var ajax = new sack();
//自定义事件，当数据加载中
function whenLoading(){
	var e = document.getElementById('replaceme'); 
	e.innerHTML = "<p>发送数据中...</p>";
}

//自定义事件，当数据已发送完
function whenLoaded(){
	var e = document.getElementById('replaceme'); 
	e.innerHTML = "<p>数据发送...</p>";
}

//自定义事件，当数据获取中
function whenInteractive(){
	var e = document.getElementById('replaceme'); 
	e.innerHTML = "<p>获取数据中...</p>";
}

//自定义事件，当数据加载完毕
function whenCompleted(){
	var e = document.getElementById('sackdata'); 
	if (ajax.responseStatus){
		var string = "<p>状态代码: " + ajax.responseStatus[0] + "</p><p>状态消息: " + ajax.responseStatus[1] + "</p><p>发送的URL串: " + ajax.URLString + "</p>";
	} else {
		var string = "<p>发送的URL串: " + ajax.URLString + "</p>";
	}
	e.innerHTML = string;	
}
//主函数
function doit(){
	//获得表单对象
	var form = document.getElementById('form');
	//设置参数
	ajax.setVar("myTextBox", form.mytext.value); 
	//设置服务器端程序
	if( form.method.value.toLowerCase() == "post" ){
		ajax.requestFile = "post.html";
	}else{
		ajax.requestFile = "get.html";
	}
	//获取提交方式
	ajax.method = form.method.value;
	//获取页面dom对象
	ajax.element = 'replaceme';
	//设置对应的事件函数
	ajax.onLoading = whenLoading;
	ajax.onLoaded = whenLoaded; 
	ajax.onInteractive = whenInteractive;
	ajax.onCompletion = whenCompleted;
	//执行ajax
	ajax.runAJAX();
}
</script>
</head>
<body>
<h1>SACK 示例 页面</h1>
<form id="form" method="post" action="sackdemo.php">
<fieldset><legend>选项...</legend>
	<label for="method">提交方式</label>
	<select id="method" name="method">
		<option value="GET">GET</option>
		<option value="POST">POST</option>
	</select>
	<label for="mytext">自定义文本</label><textarea id="mytext" name="mytext">文本内容...</textarea>
</fieldset>
	<input type="submit" onClick="doit(); return false;" onDblClick="doit(); return false;" />
</form>
<div id="replaceme"></div>
<div id="sackdata"></div>
</body>
</html>