## 2018-11-01

DONE
- 逛逛本周三个需求上线
- 内容服务分段上传接口实现，service拆分重构，任务流重构（实现了管道式任务流）

TODO
- 内容服务demo仓库迁移至正式代码仓库
  

THINKING
- 尝试实现管道式任务流（场景：对转码文件进行切片，而不是对源文件）的时候，重构了原本的任务流配置结构，采用了PREPIPE, PIPE，POSTPIPE的三段式上传策略（上传后立即触发的任务流），其中PREPIPE是对源文件进行的若干操作，即输入是源文件，输出需要持久化，可并发执行；PIPE是管道式任务流，输入是源文件，输出需要持久化，任务流中前者输出是后者输入，中间结果是否持久化待定（七牛给的管道式fop操作似乎不支持保存中间结果，也就是中间结果不支持持久化）；POSTPIPE是对管道式任务流的输出进行的若干操作，即POSTPIPE是在管道式任务流的回调处理中处理的（因为管道式任务流的输出需要在回调中获取）。设想的一个场景是，`PREPIPE：[]，PIPE：[TRANSCODE, WATERMARK, SEGMENT, PROTECT], POSTPIPE: [SCREENSHOT]`，但这里由于七牛云不支持保存中间结果，转码后的文件不能持久化，显然不可行，还得重新评估一下。


## 2018-11-05

DONE
- 逛逛本周需求：信息详情页中突出拨打电话的信息；阶段：可以送测。
- 媒体内容服务：多配置文件切割；pr合并。

TODO
- 线上数据库查询逛逛新用户手机号绑定相关数据统计，排查绑定成功率下降原因。
  

THINKING
- 逛逛上周上线绑定手机号后置之后，进入绑定页的流量下降明显，而进入绑定页之后的绑定成功率更是从30%+跌到了7%左右，后者是不可接受的，扰哥今天在逛逛需求会上提出来之后，今天花了很多时间去找原因。反复阅读代码，重新测试bug，都没有找到关键原因，这让我怀疑打点数据的可靠性——打点获取的数据真的是我们需要的数据吗，现实点看首先一点就是：埋点是否能够handle各种复杂异常情况？以手机号绑定为例，打点数据更多是用来作为绑定手机号的行为判定，而落库数据才是真正的绑定手机号的结果，以结果导向来看，我们应该更加关注结果，并且只能以结果为准。所以今天跟扰哥搞了很久没搞清楚原因，当扰哥说是不是可以增加后端打点的时候，我感觉不行，毕竟神策的统计维度有很多我还没看明白的……所以还是明天去看看可控性更高的数据库吧……
- 最近做逛逛大多都是前端需求，自己前端太菜了，所以今天开始看js了哈哈，看了阮一峰的那个教程，前面介绍了js的历史，总算是对js在2008年之后的历史有所了解，记住了一句话，“js是互联网时代的汇编”，还挺有意思的。
- 最近感觉音视频处理的任务流是个老大难，难在对具体业务不够了解的情况下，设计一个足够简单而又扩展性极强的数据结构，能够表述清楚默认需要处理的事情，并且这些事情是能够通过排列组合云服务商提供的接口完美实现的。本来七牛云提供了一个fops的"|"（串行任务流）语法和";"(并行任务流)语法，我感觉很好很强大，后来发现这个串行任务流不支持保存中间结果（尽管七牛本身已经提供了类似的语法支持），真是硬伤……


## 2018-11-06
DONE
- 逛逛本周需求：发布成功页增加“再发一条”的入口。和昨天完成开发的需求一并送测。
- 与毕涛对齐媒体内容服务必要的resource、task接口以及实现，以及消息队列的处理接口形式。

TODO
- 确认逛逛打点部分缺失的问题，并尽快修复
- 媒体内容服务除上传之外的其他API调用，开始接入回调
THINKING
- 今天信誓旦旦地跟志超说七牛上传时不支持魔法变量命名文件，然后被赤裸裸打脸，分析下来，首先七牛云的文档有一些误导性，我还真信了它的邪，根本不知道文件命令还可以在上传策略里配参数，而不仅仅是通过必填参数key；其次就是上回做hls切片，切片后的m3u8文件不支持魔法变量式命名，导致无法自动命名成带后缀的形式，这个问题我还提了工单问过，回复说不行，需要我这边手动指定，我就把这个命名问题和上传的命名问题混淆了。。。
- 大学期间做过的最大的项目和毕业设计主题都是有关任务调度系统的，对这个还是挺感兴趣的，但是实际业务中一般来说都是理想设计的残缺形态……


## 2018-11-07
DONE
- 逛逛突出显示拨打电话的需求修UI问题
- 媒体内容服务开发：音视频处理调用；resource和task的接口补充及其实现；上传默认处理任务流实现。进度：从文件上传到任务流调用，流程走通，数据库记录走通。

TODO
- 媒体内容服务部署到dev，开始测试七牛回调
  

THINKING
- 暂无
- 今天聚餐吃得挺开心

## 2018-11-08 阴
DONE
- 逛逛上线后bug修复
- 媒体内容服务：上传后默认处理任务流，模拟七牛回调验证通过，任务状态流转基本正确；实现资源查询接口，通过id查询到的结果可以直接使用（比如视频可以播放）。
  

TODO
- 媒体内容服务：mq的json序列化，dev环境真实回调验证，熟悉质量鉴黄的接口文档

THINKING
- 应该说JSON才是那个最popular的序列化方式，在遇到性能瓶颈之前，可以优先考虑json序列化，特别我之前不是写java的，总感觉用一些java特有的序列化协议会导致一些问题，首要的就是序列化内容基本没有可读性，然后就是其他语言基本上没法接入。

## 2018-11-09 
DONE
- 媒体内容服务：mq的json序列化
TODO
- 质量审核部门的服务对接会，确认鉴黄方案
THINKING
- 暂无


## 2018-11-12 
DONE
- 七牛回调与业务方回调的一些数据对齐
- 接入质量审核确认是人审+机审，使用sdk
TODO
- 到dev环境测试所有接口
  

THINKING
- 联调中的数据一致性是个问题，经常会忘记个把参数……


## 2018-11-13
DONE
- 媒体内容服务：修复resource的type字段和size字段；部分代码重构优化

TODO
- 逛逛的注册ip问题
  

THINKING
- 暂无

## 2018-11-14
DONE
- 逛逛：绑定手机号后置优化方案重构

THINKING
- 暂无


## 2018-11-15
DONE
- 尝试接入腾讯云，AuthFailure没接通，但完成了外部接口代码
- 媒体内容服务补了包括MediaServiceImpl在内的部分单元测试
- 尝试追了一下逛逛的注册ip问题，确认问题由来已久，暂无解决方案

TODO
- 媒体内容服务补充单元测试，跟进七牛云的异步拉取回调问题

THINKING
- 腾讯云的AuthFailure简直是个谜……
- Sonar的代码规范没看过，有、严格啊

## 2018-11-16
DONE
- 媒体内容服务补了很多单元测试
- 逛逛手机绑定后置优化送测
  

TODO
- 媒体内容服务：优化swagger文档；解决七牛异步拉取回调问题

THINKING

- 终于知道怎么测controller了，对测service也熟悉了不少



## 2018-11-20

DONE

- 逛逛上线绑定手机号后置优化
- 媒体内容服务：mock腾讯云异步拉取回调；修改bucket相关逻辑；优化swagger文档

TODO

- 完成腾讯云异步拉取回调闭环

THINKING

- 暂无

## 2018-11-21

DONE

- 跟腾讯云提工单沟通异步拉取的回调问题，未果
- m3u8头文件解析获取全部ts文件列表，并确认可正常播放，为备份hls切片文件做准备

TODO

- 异步拉取备份换又拍云

THINKING

- 运维方面的问题，还是要多关注，不然容易陷入bug旋涡。



## 2018-11-22

DONE

- 媒体内容服务：TaskService相关重构；Resource查询加缓存；引入又拍云服务商；加入备份m3u8切片资源的逻辑；改进统一错误处理；音视频处理操作增加资源类型匹配检查

TODO

- 又拍云测试
- 备份m3u8测试
- 重构回归测试

THINKING

- 今天是在写代码的时候对TaskService一块的代码简直不能忍所以才重构的，还是容易陷入所谓“两个和尚挑水没水喝”的尴尬境地……
- 在改代码之后往往导致原来的单元测试跑不过，一开始觉得很烦，后来觉得这个算是强行review，有助于提高代码质量。



## 2018-11-23

DONE

- 媒体内容服务：又拍云备份测试（包括m3u8备份播放）

TODO

- 新兵营

THINKING

- 今天直到新兵营动员会开始之前都一直在修bug，调整代码，做的都是一些很琐碎的事情。动员会一开始紧张（很久没有在人多的场合说话我就会紧张，心跳加速），然后自我介绍两次后感觉好了一些，其实我是超级喜欢语言表达的，觉得跟不同的人说话是一件特别有意思的事情。但是非常意外最后被选为班长……上一次做班长还是初中的事情了。后来高中到大学一直没有竞选过班长，原因是初中做班长的经历离我对班长的预期相去甚远，这后来让我觉得我不太适合承担这一类角色。但另一方面我对迎接新挑战一直持积极态度，所以对新兵营也是非常期待，期待能够跳出程序员、工程师的职业囹圄，并且要不局限于以一种“尝鲜者”的角色来尝试一些新东西，更要以一种“职业”的态度来解决这些挑战。



## 2018-11-26

DONE

- 素拓：龙珠摆尾众人抬，憾失加分亦开怀。
- 文化培训：仙姑布道，温婉如风。踏足百姓，仰望星空。
- 质量介绍：可乐有点甜，质量有点严。人审有点累，机审不太对。机器加规则，效率上台阶。未来有智能，无限多可能。
- 线下调研：扰哥一支舞，困倦全消无。调研有话术，计划要做足。

TODO

- 完善调研问卷，完成线上线下调研问卷发布与回收

THINKING

- 今天有点皮，想写打油诗。
- 今天有点疲，想躺葛优姿。
- 今天对公司文化价值观的解读，印象深刻，各组基本上都解读得挺好的。“简单”组，够简单，直白清晰；“与优秀的人一起共事”组和我们组“成为更好的自己”都是有一些过于抠字眼了，最后呈现出来的不够有大局观。“自由与责任”则是展现了很多个人思考，我觉得很有价值，但是少了一点自由与责任论证关系的解读。
- 服务类的调研，一开始我可能还抱着一种心态是，如果你要去创业，或者你是这个项目的owner，你应该如何调研如何思考。但是回到新兵营本身，一些客观条件限制会更加考验我们的“结构化思考力”，也就是说在有限的时间有限的资源条件下，如何运用成熟、有效的结构化的思考方式，来处理一些取舍棘手的问题，最终选择最适合的方案。



## 2018-11-27

DONE

- 线上线下调研

TODO

- 中期review

THINKING

- 课程
  - 分类广告业务：今天get到的最重要的一点是：“分类满足什么样的需求”。从我过往的生活经历看，我不是百姓网的用户，很难解答这个问题。丝丝将分类与现在比较多的垂直细分领域的产品作比较，特别是“厚”与“薄”的比较，让我有了一些形象的认识。之前还比较容易忽略的一点是，用户的多样性。从互联网产品发展的角度讲，现在的产品有一种从多元向单一用户画像的趋势，我们作为用户甚至也逐渐习惯于这些用户画像所赋予的标签。印象比较深刻的还有一点是丝丝关于定价提到曾经做过分钟级调价的方案，但是由于直觉上的不合理而放弃了，这让我联想到曾经用过的阿里云的价格方案。阿里云机器资源的动态价格也是分钟级调价的，但是组合得比较好，除了价格方案特别复杂很难阅读以外，一般使用下来不会有太大困扰，很少会导致需要用户多花钱。但是回到分类广告这个业务，从用户购买投放的这一行为以及投放本身出发思考，似乎都没有分钟级调价的必要。
  - 技术：因为自己是技术，剑剑讲过的大部分有所了解，印象最深的是关于“如何与技术合作”的那一部分，期待可以出“如何与产品合作”、“如何与设计合作”系列~
- 踊跃发言很重要。前辈们提醒过，但是真到上课的时候，脑子都用来消化台上的人透露的信息了……



## 2018-11-28

DONE

- 用户日中期review

TODO

- 用户日方案细化

THINKING

- 静茹一组专业得真实，甘拜下风，学习楷模。
- 在方案这一块，由于某些因素，我感觉需要学习农村包围城市、迂回作战等等方式来掩盖绝对战斗力的劣势……
- 反思昨天线下调研的几个问题：预案做得不够，完全没有画面感的情况下去做一件未知的事情，总是倾向于延迟做计划，最后总是匆忙开始，草草收场。另一个问题是，线下调研也是团队作战，而不是散兵游勇，合作默契程度也很重要，这个容易被忽略。目前想到的解决方案是，一方面持续扩大自己的“知识面”（包括高大上的视野格局，以及接地气的柴米油盐），另一方面是始终保持协同作战的意识，并极力降低沟通成本以及沟通不畅的代价。
  - 对花花和健硕的讲话，我现在脑海中的一个词就是“幅员广阔”。先说花花，
    - 公司的一个价值取向是“美誉度”>“知名度”
    - 技术+服务双驱动（这里我觉得花花对技术的一个双驱动能力模型的期待可能表述的是一个难以实现的理想情况，打造一支这样的技术团队，在我的认知里等于打造一支拥有5个勒布朗詹姆斯的篮球队，更加现实的还是球队中有得分手有防守悍将有篮板痴汉等等）
    - 子品牌问题，“百姓”这个IP挺好，价值很大，但是不是各处都适用。
    - 公司扩张中的管理问题：文化被稀释，协作变复杂（公司扩张的同时，保持团队的规模不扩张）
    - 想做，能做，可以做的三维并集决策模型
    - 百姓网早期发展的经验教训：copy硅谷模式的中国化问题；精英团队分封闭性问题
  - 建硕：
    - 创新者的窘境如何破解？
      - 生存本身就是困难的
      - 有格调的组织本身的生命力足够顽强
      - 保持较小的团队规模
      - 准备好去应对挑战
      - 提升自己的素养，要有能力做选择
    - 慢速决策，提升决策质量
    - 公司政治是指，将不需要引入讨论的因素引入讨论
    - 新员工的加入会带来自己的印记，所谓硅谷风格、阿里流派，为我所用即可，不讲派系
    - 与不同的人进行沟通的技巧，需要后天加强学习
    - 找到高杠杆的事情来做，提升单位劳动产出，实现更大的自我价值。这种诉求非常适合互联网这种边际成本很低的载体。

## 2018-11-29

DONE

- 重新设计用户日方案

TODO

- 完善答辩ppt，完成用户日方案答辩

THINKING

- 正在做可行性分析>_<
- 急救课，希望可以成为我学习生存技能的起点吧~急救课学习过程中需要举一反三，毕竟现实情况会比演练时复杂百倍。
- 产品课，全程在反思我们的方案。对产品的一个思考，让互联网回归互联网——做互联，而非侵入；让计算机分担人的重复性脑力工作——流程化，。
- 接触不到真实数据，严重缺乏画面感；社会统计学理论没学好，经验太少；纸上谈兵容易导致感觉良好。
- 做方案的两种窘境：有人做过，但是失败了，你做为什么能行？没有人做过，你做为什么能行？问题无解，只能理清方案的逻辑，做好方案的细节。
- 记录一下我们组的方案产品首页：http://www.huangzhen.baixing.cn/a/quanwangtong?src=haina_topbar

